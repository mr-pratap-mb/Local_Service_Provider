import{r as s,u as w,s as o,j as e}from"./index-BB-twZpJ.js";function S(){const[l,f]=s.useState(""),[n,b]=s.useState(""),[d,x]=s.useState(""),[a,p]=s.useState(""),[h,v]=s.useState([]),[c,t]=s.useState(!1),u=w();s.useEffect(()=>{y()},[]);async function y(){const{data:r}=await o.from("categories").select("id, name");v(r||[])}async function j(r){r.preventDefault(),t(!0);try{const{data:i}=await o.auth.getUser(),g=i?.user;if(!g){alert("Please login to add a service."),u("/login");return}if(!a){alert("Please select a category"),t(!1);return}const{error:m}=await o.from("services").insert([{provider_id:g.id,title:l,description:n,price:d,category_id:Number(a)}]);if(m)throw m;alert("Service added successfully!"),u("/provider-dashboard")}catch(i){alert("Failed: "+i.message)}finally{t(!1)}}return e.jsx("div",{className:"flex-1 bg-gray-50 mobile-padding",children:e.jsxs("div",{className:"responsive-form mx-auto bg-white mobile-padding md:p-8 rounded-lg shadow-md",children:[e.jsx("h2",{className:"responsive-text-2xl font-bold mb-4 md:mb-6 text-gray-800 mobile-text-center",children:"Add a New Service"}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Service Title"}),e.jsx("input",{value:l,onChange:r=>f(r.target.value),placeholder:"e.g. Professional Plumbing Service",className:"w-full border border-gray-200 rounded-lg p-4 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Description"}),e.jsx("textarea",{value:n,onChange:r=>b(r.target.value),placeholder:"Describe your service in detail",className:"w-full border border-gray-200 rounded-lg p-4 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:"4",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Price (â‚¹)"}),e.jsx("input",{value:d,onChange:r=>x(r.target.value),placeholder:"e.g. 500",className:"w-full border border-gray-200 rounded-lg p-4 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,type:"number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Category"}),e.jsxs("select",{value:a,onChange:r=>p(r.target.value),className:"w-full border border-gray-200 rounded-lg p-4 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),h.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsx("button",{disabled:c,className:"w-full bg-indigo-600 text-white py-4 rounded-lg font-bold hover:bg-indigo-700 transition disabled:opacity-70",children:c?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding Service..."]}):"Add Service"})]})]})})}export{S as default};
