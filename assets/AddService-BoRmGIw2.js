import{r as a,s,j as t}from"./index-B3IZbtJy.js";function S(){const[i,g]=a.useState(""),[l,h]=a.useState(""),[o,f]=a.useState(""),[d,m]=a.useState(""),[x,v]=a.useState([]),[n,c]=a.useState(!1);a.useEffect(()=>{w()},[]);async function w(){const{data:e}=await s.from("categories").select("id, name");v(e||[])}async function b(e){e.preventDefault(),c(!0);try{const{data:r}=await s.auth.getUser(),u=r?.user;if(!u){alert("Please login to add a service."),window.location.href="/login";return}const{error:p}=await s.from("services").insert([{provider_id:u.id,title:i,description:l,price:o,category_id:Number(d)}]);if(p)throw p;alert("Service added successfully!"),window.location.href="/"}catch(r){alert("Failed: "+r.message)}finally{c(!1)}}return t.jsx("div",{className:"min-h-screen p-10 bg-gray-50",children:t.jsxs("div",{className:"max-w-2xl mx-auto bg-white p-6 rounded-lg shadow",children:[t.jsx("h2",{className:"text-2xl font-bold text-purple-700 mb-4",children:"Add Service"}),t.jsxs("form",{onSubmit:b,className:"space-y-4",children:[t.jsx("input",{value:i,onChange:e=>g(e.target.value),placeholder:"Service title",className:"w-full border p-2 rounded",required:!0}),t.jsx("textarea",{value:l,onChange:e=>h(e.target.value),placeholder:"Description",className:"w-full border p-2 rounded",required:!0}),t.jsx("input",{value:o,onChange:e=>f(e.target.value),placeholder:"Price",className:"w-full border p-2 rounded",required:!0}),t.jsxs("select",{value:d,onChange:e=>m(e.target.value),className:"w-full border p-2 rounded",required:!0,children:[t.jsx("option",{value:"",children:"Select Category"}),x.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]}),t.jsx("button",{disabled:n,className:"bg-purple-600 text-white px-4 py-2 rounded",children:n?"Adding...":"Add Service"})]})]})})}export{S as default};
