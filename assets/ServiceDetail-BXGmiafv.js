import{g as te,r as I,j as o,s as P,a as re,u as ne}from"./index-2ZjFlii8.js";var U={exports:{}},se=U.exports,Q;function ie(){return Q||(Q=1,(function(O,$){(function(S,M){O.exports=M()})(se,(function(){var S=1e3,M=6e4,L=36e5,b="millisecond",y="second",j="minute",v="hour",m="day",C="week",x="month",z="quarter",w="year",Y="date",V="Invalid Date",G=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,K=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,X={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var r=["th","st","nd","rd"],e=s%100;return"["+s+(r[(e-20)%10]||r[e]||r[0])+"]"}},q=function(s,r,e){var n=String(s);return!n||n.length>=r?s:""+Array(r+1-n.length).join(e)+s},ee={s:q,z:function(s){var r=-s.utcOffset(),e=Math.abs(r),n=Math.floor(e/60),t=e%60;return(r<=0?"+":"-")+q(n,2,"0")+":"+q(t,2,"0")},m:function s(r,e){if(r.date()<e.date())return-s(e,r);var n=12*(e.year()-r.year())+(e.month()-r.month()),t=r.clone().add(n,x),i=e-t<0,a=r.clone().add(n+(i?-1:1),x);return+(-(n+(e-t)/(i?t-a:a-t))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M:x,y:w,w:C,d:m,D:Y,h:v,m:j,s:y,ms:b,Q:z}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},W="en",k={};k[W]=X;var Z="$isDayjsObject",J=function(s){return s instanceof A||!(!s||!s[Z])},E=function s(r,e,n){var t;if(!r)return W;if(typeof r=="string"){var i=r.toLowerCase();k[i]&&(t=i),e&&(k[i]=e,t=i);var a=r.split("-");if(!t&&a.length>1)return s(a[0])}else{var c=r.name;k[c]=r,t=c}return!n&&t&&(W=t),t||!n&&W},l=function(s,r){if(J(s))return s.clone();var e=typeof r=="object"?r:{};return e.date=s,e.args=arguments,new A(e)},u=ee;u.l=E,u.i=J,u.w=function(s,r){return l(s,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var A=(function(){function s(e){this.$L=E(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[Z]=!0}var r=s.prototype;return r.parse=function(e){this.$d=(function(n){var t=n.date,i=n.utc;if(t===null)return new Date(NaN);if(u.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var a=t.match(G);if(a){var c=a[2]-1||0,d=(a[7]||"0").substring(0,3);return i?new Date(Date.UTC(a[1],c,a[3]||1,a[4]||0,a[5]||0,a[6]||0,d)):new Date(a[1],c,a[3]||1,a[4]||0,a[5]||0,a[6]||0,d)}}return new Date(t)})(e),this.init()},r.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},r.$utils=function(){return u},r.isValid=function(){return this.$d.toString()!==V},r.isSame=function(e,n){var t=l(e);return this.startOf(n)<=t&&t<=this.endOf(n)},r.isAfter=function(e,n){return l(e)<this.startOf(n)},r.isBefore=function(e,n){return this.endOf(n)<l(e)},r.$g=function(e,n,t){return u.u(e)?this[n]:this.set(t,e)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(e,n){var t=this,i=!!u.u(n)||n,a=u.p(e),c=function(_,g){var D=u.w(t.$u?Date.UTC(t.$y,g,_):new Date(t.$y,g,_),t);return i?D:D.endOf(m)},d=function(_,g){return u.w(t.toDate()[_].apply(t.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(g)),t)},h=this.$W,f=this.$M,p=this.$D,T="set"+(this.$u?"UTC":"");switch(a){case w:return i?c(1,0):c(31,11);case x:return i?c(1,f):c(0,f+1);case C:var N=this.$locale().weekStart||0,B=(h<N?h+7:h)-N;return c(i?p-B:p+(6-B),f);case m:case Y:return d(T+"Hours",0);case v:return d(T+"Minutes",1);case j:return d(T+"Seconds",2);case y:return d(T+"Milliseconds",3);default:return this.clone()}},r.endOf=function(e){return this.startOf(e,!1)},r.$set=function(e,n){var t,i=u.p(e),a="set"+(this.$u?"UTC":""),c=(t={},t[m]=a+"Date",t[Y]=a+"Date",t[x]=a+"Month",t[w]=a+"FullYear",t[v]=a+"Hours",t[j]=a+"Minutes",t[y]=a+"Seconds",t[b]=a+"Milliseconds",t)[i],d=i===m?this.$D+(n-this.$W):n;if(i===x||i===w){var h=this.clone().set(Y,1);h.$d[c](d),h.init(),this.$d=h.set(Y,Math.min(this.$D,h.daysInMonth())).$d}else c&&this.$d[c](d);return this.init(),this},r.set=function(e,n){return this.clone().$set(e,n)},r.get=function(e){return this[u.p(e)]()},r.add=function(e,n){var t,i=this;e=Number(e);var a=u.p(n),c=function(f){var p=l(i);return u.w(p.date(p.date()+Math.round(f*e)),i)};if(a===x)return this.set(x,this.$M+e);if(a===w)return this.set(w,this.$y+e);if(a===m)return c(1);if(a===C)return c(7);var d=(t={},t[j]=M,t[v]=L,t[y]=S,t)[a]||1,h=this.$d.getTime()+e*d;return u.w(h,this)},r.subtract=function(e,n){return this.add(-1*e,n)},r.format=function(e){var n=this,t=this.$locale();if(!this.isValid())return t.invalidDate||V;var i=e||"YYYY-MM-DDTHH:mm:ssZ",a=u.z(this),c=this.$H,d=this.$m,h=this.$M,f=t.weekdays,p=t.months,T=t.meridiem,N=function(g,D,H,F){return g&&(g[D]||g(n,i))||H[D].slice(0,F)},B=function(g){return u.s(c%12||12,g,"0")},_=T||function(g,D,H){var F=g<12?"AM":"PM";return H?F.toLowerCase():F};return i.replace(K,(function(g,D){return D||(function(H){switch(H){case"YY":return String(n.$y).slice(-2);case"YYYY":return u.s(n.$y,4,"0");case"M":return h+1;case"MM":return u.s(h+1,2,"0");case"MMM":return N(t.monthsShort,h,p,3);case"MMMM":return N(p,h);case"D":return n.$D;case"DD":return u.s(n.$D,2,"0");case"d":return String(n.$W);case"dd":return N(t.weekdaysMin,n.$W,f,2);case"ddd":return N(t.weekdaysShort,n.$W,f,3);case"dddd":return f[n.$W];case"H":return String(c);case"HH":return u.s(c,2,"0");case"h":return B(1);case"hh":return B(2);case"a":return _(c,d,!0);case"A":return _(c,d,!1);case"m":return String(d);case"mm":return u.s(d,2,"0");case"s":return String(n.$s);case"ss":return u.s(n.$s,2,"0");case"SSS":return u.s(n.$ms,3,"0");case"Z":return a}return null})(g)||a.replace(":","")}))},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(e,n,t){var i,a=this,c=u.p(n),d=l(e),h=(d.utcOffset()-this.utcOffset())*M,f=this-d,p=function(){return u.m(a,d)};switch(c){case w:i=p()/12;break;case x:i=p();break;case z:i=p()/3;break;case C:i=(f-h)/6048e5;break;case m:i=(f-h)/864e5;break;case v:i=f/L;break;case j:i=f/M;break;case y:i=f/S;break;default:i=f}return t?i:u.a(i)},r.daysInMonth=function(){return this.endOf(x).$D},r.$locale=function(){return k[this.$L]},r.locale=function(e,n){if(!e)return this.$L;var t=this.clone(),i=E(e,n,!0);return i&&(t.$L=i),t},r.clone=function(){return u.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},s})(),R=A.prototype;return l.prototype=R,[["$ms",b],["$s",y],["$m",j],["$H",v],["$W",m],["$M",x],["$y",w],["$D",Y]].forEach((function(s){R[s[1]]=function(r){return this.$g(r,s[0],s[1])}})),l.extend=function(s,r){return s.$i||(s(r,A,l),s.$i=!0),l},l.locale=E,l.isDayjs=J,l.unix=function(s){return l(1e3*s)},l.en=k[W],l.Ls=k,l.p={},l}))})(U)),U.exports}var ae=ie();const oe=te(ae);function ue({serviceId:O,providerId:$,onBooked:S}){const[M,L]=I.useState(""),[b,y]=I.useState(!1);async function j(v){v.preventDefault(),y(!0);try{const{data:m,error:C}=await P.auth.getUser();if(C||!m?.user)throw new Error("You must be logged in.");const x=m.user.id,{data:z,error:w}=await P.from("bookings").insert([{user_id:x,provider_id:$,service_id:O,scheduled_date:oe(M).toISOString(),status:"pending",category_id:null,notes:""}]).select().single();if(w)throw w;alert("✅ Booking successful!"),S?.(z)}catch(m){alert("Booking failed: "+m.message),console.error(m)}finally{y(!1)}}return o.jsxs("form",{onSubmit:j,className:"space-y-4",children:[o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Choose Date & Time"}),o.jsx("input",{type:"datetime-local",required:!0,value:M,onChange:v=>L(v.target.value),className:"mt-1 block w-full rounded border-gray-300 p-2"})]}),o.jsx("button",{type:"submit",disabled:b,className:"w-full bg-purple-600 text-white py-2 rounded-md hover:bg-purple-700 transition",children:b?"Booking...":"Book Now"})]})}function de(){const{id:O}=re(),[$,S]=I.useState(null),[M,L]=I.useState(!0),b=ne();return I.useEffect(()=>{async function y(){const{data:j,error:v}=await P.from("services").select("*, provider:provider_id ( id, full_name )").eq("id",O).single();v&&console.error(v),S(j),L(!1)}y()},[O]),M?o.jsx("div",{className:"p-10 text-center text-purple-700",children:"Loading service..."}):$?o.jsx("div",{className:"min-h-screen bg-white py-10 px-6",children:o.jsx("div",{className:"max-w-6xl mx-auto",children:o.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:o.jsxs("div",{className:"grid md:grid-cols-2 gap-8 p-8",children:[o.jsxs("div",{children:[o.jsx("div",{className:"h-80 bg-gray-100 rounded-xl overflow-hidden mb-6",children:o.jsx("div",{className:"bg-gray-200 border-2 border-dashed rounded-xl w-full h-full flex items-center justify-center",children:o.jsx("span",{className:"text-gray-500 font-medium",children:"Service Image"})})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:$.title}),o.jsx("p",{className:"text-gray-700 mb-6",children:$.description}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.jsxs("span",{className:"text-xl font-bold text-indigo-600",children:["₹",$.price]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),o.jsx("span",{className:"text-gray-600",children:$.location||"Multiple locations"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),o.jsx("span",{className:"text-gray-600",children:$.provider?.full_name||"Professional Provider"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Book this Service"}),o.jsx(ue,{serviceId:$.id,providerId:$.provider_id,onBooked:()=>{alert("Booking created!"),b("/user-dashboard")}})]})]})})})}):o.jsx("div",{className:"p-10 text-center text-gray-600",children:"Service not found."})}export{de as default};
