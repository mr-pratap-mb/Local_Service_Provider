import{r as o,u as b,j as e,s as i}from"./index-B3IZbtJy.js";function j(){const[l,p]=o.useState(""),[n,h]=o.useState(""),[d,u]=o.useState(!1),c=b();async function f(s){s.preventDefault(),u(!0);try{const{data:r,error:m}=await i.auth.signInWithPassword({email:l,password:n});if(m)throw m;let t=r?.user;if(!t){const{data:a}=await i.auth.getUser();t=a?.user}if(await new Promise(a=>setTimeout(a,300)),!t)throw new Error("Login session not established yet. Please retry.");const{data:x,error:g}=await i.from("profiles").select("role").eq("id",t.id).single();if(g)throw g;x?.role==="provider"?c("/provider-dashboard"):c("/user-dashboard")}catch(r){console.error("Login error:",r),alert("Login failed: "+r.message)}finally{u(!1)}}return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 to-purple-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-center text-purple-700 mb-6",children:"Login to Your Account"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:l,onChange:s=>p(s.target.value),required:!0,className:"w-full border rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:n,onChange:s=>h(s.target.value),required:!0,className:"w-full border rounded-md p-2"})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-purple-600 text-white py-2 rounded-md hover:bg-purple-700 transition",children:d?"Logging in...":"Login"})]})]})})}export{j as default};
